<!DOCTYPE html>
<html lang="en" xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity6"
      xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <title>WMS Employee - Home</title>
</head>
<body>
<h1>WMS Employee Management System</h1>

<!-- Not authenticated section -->
<div sec:authorize="!isAuthenticated()">
    <h2>Welcome! Please log in to continue.</h2>
    <a th:href="@{/oauth2/authorization/auth0}">
        <button type="button">Log In with Auth0</button>
    </a>
</div>

<!-- Authenticated section -->
<div sec:authorize="isAuthenticated()">
    <h2>You are logged in!</h2>

    <div th:if="${profile != null}">
        <img style="width: 100px; height: 100px; border-radius: 50%;"
             th:attr="alt=${profile.get('name')}"
             th:if="${profile.get('picture')}"
             th:src="${profile.get('picture')}"/>

        <h3 th:text="${profile.get('name')}">User Name</h3>
        <p><strong>Email:</strong> <span th:text="${profile.get('email')}">user@example.com</span></p>
        <p><strong>User ID:</strong> <span th:text="${profile.get('sub')}">user-id</span></p>
    </div>

    <form method="post" name="logoutForm" th:action="@{/logout}">
        <button type="submit">Log Out</button>
    </form>
</div>
</body>
</html>